{"version":3,"sources":["errors/index.js","actions/common.js","models/hello.js","utils.js","actions/utils.js","components/Loading.jsx","components/ResponsiveScreen.jsx","containers/Welcome/Welcomescreen.jsx"],"names":["ERROR_LOGIN_VALIDATE_MISSINGUSERNAME","ERROR_LOGIN_VALIDATE_MISSINGPASSWORD","ERROR_LOGIN_FAILED","ERROR_HTTP_NETWORK_ERROR","ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS","ERROR_HTTP_UNEXPECTED_RESPONSE_STATE","ExtendedError","message","values","undefined","Error","captureStackTrace","ErrorMessage","withTranslation","props","error","t","id","messageDescriptor","Object","assign","defaultMessage","receiveError","type","types","resetHello","receiveHello","hello","success","username","displayName","state","executeHello","dispatch","getState","common","flow","query","r","withClientRequestState","newHelloRequest","axios","post","headers","then","response","status","data","Promise","resolve","catch","handleAxiosError","retryHello","executeLogoff","prompt","selectedFlow","scope","client_id","redirect_uri","id_token_hint","max_age","claims_scope","obj","Math","random","toString","substring","request","Loading","this","Grid","item","align","renderIf","LinearProgress","className","Typography","variant","gutterBottom","color","Button","autoFocus","onClick","event","retry","preventDefault","React","PureComponent","connect","ResponsiveScreen","classes","withoutLogo","withoutPadding","loading","children","other","logo","src","process","alt","content","DialogContent","container","justifyContent","alignItems","direction","spacing","classNames","root","wrapper","Trans","i18nKey","defaultProps","withStyles","theme","display","flex","position","width","actions","marginTop","paddingLeft","paddingRight","maxWidth","Welcomescreen","branding","component","subHeader","DialogActions","button","logoff","history","push","margin","minWidth","marginBottom"],"mappings":"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","file":"static/js/containers-welcome.5ccd8775.chunk.js","sourcesContent":["import { withTranslation } from 'react-i18next';\n\nexport const ERROR_LOGIN_VALIDATE_MISSINGUSERNAME = 'konnect.error.login.validate.missingUsername';\nexport const ERROR_LOGIN_VALIDATE_MISSINGPASSWORD = 'konnect.error.login.validate.missingPassword';\nexport const ERROR_LOGIN_FAILED = 'konnect.error.login.failed';\nexport const ERROR_HTTP_NETWORK_ERROR = 'konnect.error.http.networkError';\nexport const ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS = 'konnect.error.http.unexpectedResponseStatus';\nexport const ERROR_HTTP_UNEXPECTED_RESPONSE_STATE = 'konnect.error.http.unexpectedResponseState';\n\n// Error with values.\nexport class ExtendedError extends Error {\n  values = undefined;\n\n  constructor(message, values) {\n    super(message);\n    if (Error.captureStackTrace !== undefined) {\n      Error.captureStackTrace(this, ExtendedError);\n    }\n    this.values = values;\n  }\n}\n\n// Component to translate error text with values.\nfunction ErrorMessageComponent(props) {\n  const { error, t, values } = props;\n\n  if (!error) {\n    return null;\n  }\n\n  const id = error.id ? error.id : error.message;\n  const messageDescriptor = Object.assign({}, {\n    id,\n    defaultMessage: error.id ? error.message : undefined,\n    values: {\n      ...error.values,\n      ...values,\n    },\n  });\n\n  switch (messageDescriptor.id) {\n    case ERROR_LOGIN_VALIDATE_MISSINGUSERNAME:\n      return t(\"konnect.error.login.validate.missingUsername\", \"Enter a valid value.\", messageDescriptor.values);\n    case ERROR_LOGIN_VALIDATE_MISSINGPASSWORD:\n      return t(\"konnect.error.login.validate.missingPassword\", \"Enter your password.\");\n    case ERROR_LOGIN_FAILED:\n      return t(\"konnect.error.login.failed\", \"Logon failed. Please verify your credentials and try again.\");\n    case ERROR_HTTP_NETWORK_ERROR:\n      return t(\"konnect.error.http.networkError\", \"Network error. Please check your connection and try again.\");\n    case ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS:\n      return t(\"konnect.error.http.unexpectedResponseStatus\", \"Unexpected HTTP response: {{status}}. Please check your connection and try again.\", messageDescriptor.values);\n    case ERROR_HTTP_UNEXPECTED_RESPONSE_STATE:\n      return t(\"konnect.error.http.unexpectedResponseState\", \"Unexpected response state: {{state}}\", messageDescriptor.values);\n    default:\n  }\n\n  const f = t;\n  return f(messageDescriptor.defaultMessage, messageDescriptor.values);\n}\n\nexport const ErrorMessage = withTranslation()(ErrorMessageComponent);\n","import axios from 'axios';\n\nimport { newHelloRequest } from '../models/hello';\nimport { withClientRequestState } from '../utils';\nimport {\n  ExtendedError,\n  ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS,\n  ERROR_HTTP_UNEXPECTED_RESPONSE_STATE\n} from '../errors';\n\nimport { handleAxiosError } from './utils';\nimport * as types from './types';\n\nexport function receiveError(error) {\n  return {\n    type: types.RECEIVE_ERROR,\n    error\n  };\n}\n\nexport function resetHello() {\n  return {\n    type: types.RESET_HELLO\n  };\n}\n\nexport function receiveHello(hello) {\n  const { success, username, displayName } = hello;\n\n  return {\n    type: types.RECEIVE_HELLO,\n    state: success === true,\n    username,\n    displayName,\n    hello\n  };\n}\n\nexport function executeHello() {\n  return function(dispatch, getState) {\n    dispatch(resetHello());\n\n    const { flow, query } = getState().common;\n\n    const r = withClientRequestState(newHelloRequest(flow, query));\n    return axios.post('./identifier/_/hello', r, {\n      headers: {\n        'Kopano-Konnect-XSRF': '1'\n      }\n    }).then(response => {\n      switch (response.status) {\n        case 200:\n          // success.\n          return response.data;\n        case 204:\n          // not signed-in.\n          return {\n            success: false,\n            state: response.headers['kopano-konnect-state']\n          };\n        default:\n          // error.\n          throw new ExtendedError(ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS, response);\n      }\n    }).then(response => {\n      if (response.state !== r.state) {\n        throw new ExtendedError(ERROR_HTTP_UNEXPECTED_RESPONSE_STATE, response);\n      }\n\n      dispatch(receiveHello(response));\n      return Promise.resolve(response);\n    }).catch(error => {\n      error = handleAxiosError(error);\n\n      dispatch(receiveError(error));\n    });\n  };\n}\n\nexport function retryHello() {\n  return function(dispatch) {\n    dispatch(receiveError(null));\n\n    return dispatch(executeHello());\n  };\n}\n\nexport function requestLogoff() {\n  return {\n    type: types.REQUEST_LOGOFF\n  };\n}\n\nexport function receiveLogoff(state) {\n  return {\n    type: types.RECEIVE_LOGOFF,\n    state\n  };\n}\n\nexport function executeLogoff() {\n  return function(dispatch) {\n    dispatch(resetHello());\n    dispatch(requestLogoff());\n\n    const r = withClientRequestState({});\n    return axios.post('./identifier/_/logoff', r, {\n      headers: {\n        'Kopano-Konnect-XSRF': '1'\n      }\n    }).then(response => {\n      switch (response.status) {\n        case 200:\n          // success.\n          return response.data;\n        default:\n          // error.\n          throw new ExtendedError(ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS, response);\n      }\n    }).then(response => {\n      if (response.state !== r.state) {\n        throw new ExtendedError(ERROR_HTTP_UNEXPECTED_RESPONSE_STATE, response);\n      }\n\n      dispatch(receiveLogoff(response.success === true));\n      return Promise.resolve(response);\n    }).catch(error => {\n      error = handleAxiosError(error);\n\n      dispatch(receiveError(error));\n    });\n  };\n}\n","export function newHelloRequest(flow, query) {\n  const r = {};\n\n  if (query.prompt) {\n    // TODO(longsleep): Validate prompt values?\n    r.prompt = query.prompt;\n  }\n\n  let selectedFlow = flow;\n  switch (flow) {\n    case 'oauth':\n    case 'consent':\n    case 'oidc':\n      r.scope = query.scope || '';\n      r.client_id = query.client_id || ''; // eslint-disable-line camelcase\n      r.redirect_uri = query.redirect_uri || '';  // eslint-disable-line camelcase\n      if (query.id_token_hint) {\n        r.id_token_hint = query.id_token_hint;  // eslint-disable-line camelcase\n      }\n      if (query.max_age) {\n        r.max_age = query.max_age;  // eslint-disable-line camelcase\n      }\n      if (query.claims_scope) {\n        // Add additional scopes from claims request if given.\n        r.scope += ' ' + query.claims_scope;\n      }\n      break;\n\n    default:\n      selectedFlow = null;\n  }\n\n  if (selectedFlow) {\n    r.flow = selectedFlow;\n  }\n\n  return r;\n}\n","export function withClientRequestState(obj) {\n  obj.state = Math.random().toString(36).substring(7);\n\n  return obj;\n}\n","import {\n  ExtendedError,\n  ERROR_HTTP_NETWORK_ERROR,\n  ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS\n} from '../errors';\n\nexport function handleAxiosError(error) {\n  if (error.request) {\n    // Axios errors.\n    if (error.response) {\n      error = new ExtendedError(ERROR_HTTP_UNEXPECTED_RESPONSE_STATUS, error.response);\n    } else {\n      error = new ExtendedError(ERROR_HTTP_NETWORK_ERROR);\n    }\n  }\n\n  return error;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { withTranslation } from 'react-i18next';\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport renderIf from 'render-if';\n\nimport { retryHello } from '../actions/common';\nimport { ErrorMessage } from '../errors';\n\nclass Loading extends React.PureComponent {\n  render() {\n    const { error, t } = this.props;\n\n    return (\n        <Grid item align=\"center\">\n          {renderIf(error === null)(() => (\n            <LinearProgress className=\"oc-progress\" />\n          ))}\n          {renderIf(error !== null)(() => (\n            <div>\n              <Typography className=\"oc-light\" variant=\"h5\" gutterBottom align=\"center\">\n                {t(\"konnect.loading.error.headline\", \"Failed to connect to server\")}\n              </Typography>\n              <Typography align=\"center\" color=\"error\">\n                <ErrorMessage error={error}></ErrorMessage>\n              </Typography>\n              <Button\n                autoFocus\n                color=\"primary\"\n                variant=\"outlined\"\n                className=\"oc-button-primary oc-mt-l\"\n                onClick={(event) => this.retry(event)}\n              >\n                {t(\"konnect.login.retryButton.label\", \"Retry\")}\n              </Button>\n            </div>\n          ))}\n        </Grid>\n    );\n  }\n\n  retry(event) {\n    event.preventDefault();\n\n    this.props.dispatch(retryHello());\n  }\n}\n\nLoading.propTypes = {\n  classes: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired,\n\n  error: PropTypes.object,\n\n  dispatch: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n  const { error } = state.common;\n\n  return {\n    error\n  };\n};\n\nexport default connect(mapStateToProps)(withTranslation()(Loading));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { Trans } from 'react-i18next';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport Loading from './Loading';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flex: 1,\n  },\n  content: {\n    position: 'relative',\n    width: '100%'\n  },\n  actions: {\n    marginTop: -40,\n    justifyContent: 'flex-start',\n    paddingLeft: theme.spacing(3),\n    paddingRight: theme.spacing(3)\n  },\n  wrapper: {\n    width: '100%',\n    maxWidth: 300,\n    display: 'flex',\n    flex: 1,\n    alignItems: 'center'\n  }\n});\n\nconst ResponsiveScreen = (props) => {\n  const {\n    classes,\n    withoutLogo,\n    withoutPadding,\n    loading,\n    children,\n    className,\n    ...other\n  } = props;\n\n  const logo = withoutLogo ? null :\n    <img src={process.env.PUBLIC_URL + '/static/logo.svg'} className=\"oc-logo\" alt=\"ownCloud Logo\"/>;\n\n  const content = loading ? <Loading/> : (withoutPadding ? children : <DialogContent>{children}</DialogContent>);\n\n  return (\n    <Grid container justifyContent=\"center\" alignItems=\"center\" direction=\"column\" spacing={0}\n      className={classNames(classes.root, className)} {...other}>\n        <div className={classes.wrapper}>\n            <div className={classes.content}>\n              {logo}\n              {content}\n            </div>\n        </div>\n        <footer className=\"oc-footer-message\">\n              <Trans i18nKey=\"konnect.footer.slogan\"><strong>ownCloud</strong> - a safe home for all your data</Trans>\n        </footer>\n    </Grid>\n  );\n};\n\nResponsiveScreen.defaultProps = {\n  withoutLogo: false,\n  withoutPadding: false,\n  loading: false\n};\n\nResponsiveScreen.propTypes = {\n  classes: PropTypes.object.isRequired,\n  withoutLogo: PropTypes.bool,\n  withoutPadding: PropTypes.bool,\n  loading: PropTypes.bool,\n  branding: PropTypes.object,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  PaperProps: PropTypes.object,\n  DialogProps: PropTypes.object\n};\n\nexport default withStyles(styles)(ResponsiveScreen);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { withTranslation } from 'react-i18next';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport ResponsiveScreen from '../../components/ResponsiveScreen';\nimport { executeLogoff } from '../../actions/common';\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    minWidth: 100\n  },\n  subHeader: {\n    marginBottom: theme.spacing(5)\n  }\n});\n\nclass Welcomescreen extends React.PureComponent {\n  render() {\n    const { classes, branding, hello, t } = this.props;\n\n    const loading = hello === null;\n    return (\n      <ResponsiveScreen loading={loading} branding={branding}>\n        <Typography variant=\"h5\" component=\"h3\" className=\"oc-light\" >\n          {t(\"konnect.welcome.headline\", \"Welcome {{displayName}}\", {displayName: hello.displayName})}\n        </Typography>\n        <Typography variant=\"subtitle1\" className={classes.subHeader + \" oc-light\"}>\n          {hello.username}\n        </Typography>\n\n        <Typography gutterBottom className=\"oc-light\">\n          {t(\"konnect.welcome.message\", \"You are signed in - awesome!\")}\n        </Typography>\n\n        <DialogActions>\n          <Button\n            color=\"secondary\"\n            className={classes.button}\n            variant=\"contained\"\n            onClick={(event) => this.logoff(event)}\n          >\n            {t(\"konnect.welcome.signoutButton.label\", \"Sign out\")}\n          </Button>\n        </DialogActions>\n      </ResponsiveScreen>\n    );\n  }\n\n  logoff(event) {\n    event.preventDefault();\n\n    this.props.dispatch(executeLogoff()).then((response) => {\n      const { history } = this.props;\n\n      if (response.success) {\n        history.push('/identifier');\n      }\n    });\n  }\n}\n\nWelcomescreen.propTypes = {\n  classes: PropTypes.object.isRequired,\n  t: PropTypes.func.isRequired,\n\n  branding: PropTypes.object,\n  hello: PropTypes.object,\n\n  dispatch: PropTypes.func.isRequired,\n  history: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => {\n  const { branding, hello } = state.common;\n\n  return {\n    branding,\n    hello\n  };\n};\n\nexport default connect(mapStateToProps)(withStyles(styles)(withTranslation()(Welcomescreen)));\n"],"sourceRoot":""}